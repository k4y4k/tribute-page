---
kind: pipeline
type: docker
name: default

clone:
  depth: 2

steps:
  - name: pre & build
    image: node
    pull: if-not-exists
    commands:
      - npm i -g gulp-cli
      - yarn
        # weird that we need this, but we'll give it a go I guess
      - yarn add gulp
      - gulp build
    environment:
      NODE_ENV: production
